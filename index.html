<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AVIX Financial Services – Your Trusted Partner</title>
    <meta name="description" content="Empowering your financial journey with tailored loan, investment, and insurance solutions." />
    <link rel="canonical" href="https://avixfinancialsolutions.com/" />
    
    <!-- DNS Prefetch for faster external requests -->
    <link rel="dns-prefetch" href="//avixfinancialsolutions.com" />
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
    
    <!-- ✅ Remove hardcoded asset references - let Vite handle them -->
    <!-- Vite will automatically inject the built CSS and JS files -->
    
    <!-- ✅ Font optimization with swap for better performance -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preload" href="/fonts/inter.woff2" as="font" type="font/woff2" crossorigin />
    <style>
      @font-face {
        font-family: 'Inter';
        src: url('/fonts/inter.woff2') format('woff2');
        font-display: swap; /* Critical for performance */
        font-weight: 100 900;
      }
    </style>
    
    <!-- Favicon optimized -->
    <link rel="icon" href="/favicon.ico" sizes="32x32" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    
    <!-- Theme color -->
    <meta name="theme-color" content="#1C004D" />
    
    <!-- ✅ Optimized critical CSS with better loading animation -->
    <style>
      /* Critical above-the-fold styles */
      *, *::before, *::after {
        box-sizing: border-box;
      }
      
      html {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        tab-size: 4;
      }
      
      body {
        margin: 0;
        font-family: inherit;
        background-color: #ffffff;
        color: #0f172a;
        font-feature-settings: 'rlig' 1, 'calt' 1;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      #root {
        min-height: 100vh;
        isolation: isolate;
      }
      
      /* ✅ Better loading skeleton */
      .loading-skeleton {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: linear-gradient(
          90deg,
          #f8fafc 0%,
          #e2e8f0 50%,
          #f8fafc 100%
        );
        background-size: 200% 100%;
        animation: shimmer 2s infinite linear;
        z-index: 9999;
      }
      
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
      
      /* Hide skeleton once React loads */
      .app-loaded .loading-skeleton {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease-out;
      }
      
      /* Prevent layout shift */
      .loading-skeleton::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        border: 3px solid #e2e8f0;
        border-top: 3px solid #1C004D;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
      }
    </style>
    
    <!-- ✅ Optimized service worker registration -->
    <script>
      // Register service worker with better error handling
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js', {
            scope: '/',
            updateViaCache: 'none'
          }).then(function(registration) {
            console.log('SW registered successfully');
          }).catch(function(error) {
            console.log('SW registration failed');
          });
        });
      }
      
      // ✅ Mark app as loaded when React renders
      window.markAppLoaded = function() {
        document.documentElement.classList.add('app-loaded');
      };
    </script>
    
    <!-- ✅ Simplified Web Vitals monitoring -->
    <script>
      // Track Core Web Vitals
      if ('PerformanceObserver' in window) {
        try {
          new PerformanceObserver((list) => {
            list.getEntries().forEach((entry) => {
              if (entry.entryType === 'largest-contentful-paint') {
                console.log('LCP:', Math.round(entry.startTime));
              }
            });
          }).observe({ entryTypes: ['largest-contentful-paint'] });
        } catch (e) {
          // Silently fail if not supported
        }
      }
    </script>
  </head>
  <body>
    <div id="root">
      <div class="loading-skeleton" aria-label="Loading..."></div>
    </div>
    
    <!-- ✅ Let Vite handle the script injection automatically -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- ✅ Enhanced no-JS fallback -->
    <noscript>
      <style>
        .loading-skeleton { display: none !important; }
        .noscript-content {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 100vh;
          padding: 2rem;
          text-align: center;
          font-family: system-ui, sans-serif;
          background: linear-gradient(135deg, #1C004D 0%, #4C1D95 100%);
          color: white;
        }
        .noscript-content h1 {
          font-size: 2rem;
          margin-bottom: 1rem;
        }
        .noscript-content p {
          font-size: 1.125rem;
          max-width: 600px;
          line-height: 1.6;
        }
      </style>
      <div class="noscript-content">
        <h1>AVIX Financial Services</h1>
        <p>Our website requires JavaScript to provide you with the best experience. Please enable JavaScript in your browser settings to access our loan, investment, and insurance services.</p>
      </div>
    </noscript>
  </body>
</html>